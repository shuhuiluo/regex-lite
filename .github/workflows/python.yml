name: Python CI

on:
    push:
        branches: [ main ]
    pull_request:
        branches: [ main ]

jobs:
    python-ci:
        runs-on: ubuntu-latest

        steps:
            -   name: Checkout code
                uses: actions/checkout@v4

            -   name: Install uv
                uses: astral-sh/setup-uv@v4

            -   name: Set up Python
                run: uv python install 3.11

            -   name: Install dependencies
                run: uv sync

            -   name: Run linting
                run: uv run ruff check .

            -   name: Check formatting
                run: uv run black . --check

            -   name: Run tests
                run: uv run pytest
